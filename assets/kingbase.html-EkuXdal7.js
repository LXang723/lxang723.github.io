import{_ as s,c as a,f as n,o as l}from"./app-CgZO7uFy.js";const i={};function t(r,e){return l(),a("div",null,e[0]||(e[0]=[n(`<p><img src="https://img.shields.io/badge/KingbaseES-V8R6-brightgreen.svg?style=for-the-badge" alt="KingbaseES V8R6"></p><p>参考官方文档：[安装与升级]基于Linux系统的数据库软件安装指南.pdf</p><h2 id="一、安装包准备" tabindex="-1"><a class="header-anchor" href="#一、安装包准备"><span>一、安装包准备</span></a></h2><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">官方文档要求</p><p>准备需要安装的金仓数据库管理系统 KingbaseES |version| 安装程序和 jdk1.8 及以上的 jdk 环境。</p></div><p><strong>说明：</strong> 首先确认服务器的架构，根据架构准备相应的安装包文件。否则会在安装过程中出现 “无法执行二进制文件: 可执行文件格式错误” 的问题。 <img src="https://i-blog.csdnimg.cn/blog_migrate/d9452d80014e2e628a5375a7780386cc.png" alt="在这里插入图片描述"></p><p><strong>查看系统配置： 查看CPU处理器信息：</strong></p><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre><code><span class="line">lscpu</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://i-blog.csdnimg.cn/blog_migrate/be80895be0bd6a43416afe0a58864972.png" alt="在这里插入图片描述"><img src="https://i-blog.csdnimg.cn/blog_migrate/53febdeb098032aa15900f5e79106237.png" alt="在这里插入图片描述"><img src="https://i-blog.csdnimg.cn/blog_migrate/88a10ded78b67e0f2d97fa9da6090726.png" alt="在这里插入图片描述"><strong>不光是数据库，JDK也需要准备相应版本的安装包。</strong></p><p>准备好了安装包和授权文件，再进行以下操作。</p><h2 id="二、预安装工作" tabindex="-1"><a class="header-anchor" href="#二、预安装工作"><span>二、预安装工作</span></a></h2><h3 id="_1-创建安装用户" tabindex="-1"><a class="header-anchor" href="#_1-创建安装用户"><span>1.创建安装用户</span></a></h3><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">官方文档要求</p><p>安装数据库时，安装用户对于安装路径需有“读”、“写”、“执行”的权限。<br> 在 Linux 系统中，要以非 root 用户执行安装程序，且该用户要有标准的 home 目录。</p></div><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre><code><span class="line">groupadd kingbase</span>
<span class="line">useradd kingbase <span class="token operator">-</span>m <span class="token operator">-</span>g kingbase</span>
<span class="line">passwd kingbase</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://i-blog.csdnimg.cn/blog_migrate/b96224f2ec0046d1f5eaaee0819b55d7.png" alt="创建 kingbase 用户"> 输入密码、确认密码 <img src="https://i-blog.csdnimg.cn/blog_migrate/63d34564341c57d4d3e623b65c06de66.png" alt="输入密码、确认密码"></p><p>新建用户后会在 home 文件夹下创建 kingbase 目录。 后续可将文件上传到此目录 /home/kingbase ,可以避免在安装过程中出现权限问题（例如证书文件的访问权限，反正安装完成后都是要删除的）。</p><p><img src="https://i-blog.csdnimg.cn/blog_migrate/28594f46742980378004f6df91d234af.png" alt="在这里插入图片描述"></p><h3 id="_2-安装目录" tabindex="-1"><a class="header-anchor" href="#_2-安装目录"><span>2. 安装目录</span></a></h3><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">官方文档要求</p><p>金仓数据库管理系统 KingbaseES 安装过程中有默认的安装目录 /opt/Kingbase/ES/V8，如果直接使用 kingbase 用户安装，安装过程中将会提示没有权限。 因此，建议在正式安装之前，将安装目录的权限赋予 kingbase 用户： chown -R kingbase:kingbase /opt/Kingbase/ES/V8</p></div><p><img src="https://i-blog.csdnimg.cn/blog_migrate/0683c6d8c2ce2ed53219fd546656521f.png" alt="在这里插入图片描述"></p><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre><code><span class="line">mkdir <span class="token operator">-</span>pv <span class="token operator">/</span>opt/Kingbase/ES/V8</span>
<span class="line">chown <span class="token operator">-</span>R kingbase:kingbase <span class="token operator">/</span>opt/Kingbase/ES/V8</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-准备安装程序" tabindex="-1"><a class="header-anchor" href="#_3-准备安装程序"><span>3. 准备安装程序</span></a></h3><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">官方文档要求</p><p>iso 格式的安装程序包需要先挂载才能使用。挂载 iso 文件需要使用 root 用户。挂载后在目录下可以看到 setup 目录和 setup.sh 脚本。</p></div><p>在 mnt 文件夹下创建挂载目录 kingbase</p><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre><code><span class="line">mkdir <span class="token operator">-</span>pv <span class="token operator">/</span>mnt/kingbase</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>使用 root 用户挂载 iso 格式安装包（安装包文件和目录以实际为准）</p><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre><code><span class="line"><span class="token function">mount</span> <span class="token operator">-</span>o loop <span class="token operator">/</span>home/kingbase/KingbaseES_V008R006C006B0013PS003_Lin64_install<span class="token punctuation">.</span>iso <span class="token operator">/</span>mnt/kingbase</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://i-blog.csdnimg.cn/blog_migrate/a9050561cb88f87e9104daebd3822595.png" alt="在这里插入图片描述"></p><h2 id="三、安装" tabindex="-1"><a class="header-anchor" href="#三、安装"><span>三、安装</span></a></h2><h3 id="_1-控制台安装" tabindex="-1"><a class="header-anchor" href="#_1-控制台安装"><span>1. 控制台安装</span></a></h3><p>切换 kingbase 用户安装</p><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre><code><span class="line">su kingbase</span>
<span class="line">cd <span class="token operator">/</span>mnt/kingbase</span>
<span class="line">sh setup<span class="token punctuation">.</span>sh <span class="token operator">-</span>i console</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-大小写敏感设置" tabindex="-1"><a class="header-anchor" href="#_2-大小写敏感设置"><span>2. 大小写敏感设置</span></a></h3><p>在安装过程中大部分都可以直接 Enter ，但是在大小写敏感项的时候，需要设置为 No。 <img src="https://i-blog.csdnimg.cn/blog_migrate/fc149e29394e56dbe6d75b051dad3235.png" alt="在这里插入图片描述"></p><h3 id="_3-执行-root-sh" tabindex="-1"><a class="header-anchor" href="#_3-执行-root-sh"><span>3. 执行 root.sh</span></a></h3><p>安装完成，但并没有真正完整结束 <img src="https://i-blog.csdnimg.cn/blog_migrate/efd94670f4e4b9c9cd9a249ef49977cf.png" alt="在这里插入图片描述"> 根据提示将 Kingbase 注册为系统服务，执行 /opt/Kingbase/ES/V8/install/script/root.sh</p><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">官方文档要求</p><p>对于 linux 系统，金仓数据库管理系统 KingbaseES V8R6 安装完成后，需执行 root.sh，具体步骤如下： 打开新终端；<br> 切换到 root 用户；<br> 运行 &lt; 安装目录 &gt;/install/script/root.sh 。<br><strong>Note: linux 中执行 root.sh 成功后，安装过程才真正完整结束。</strong></p></div><p>切换 root 用户，执行 root.sh <img src="https://i-blog.csdnimg.cn/blog_migrate/9754907de038d2e97cfc56dbe7f8059e.png" alt="在这里插入图片描述"></p><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre><code><span class="line">su root</span>
<span class="line">sh <span class="token operator">/</span>opt/Kingbase/ES/V8/install/script/root<span class="token punctuation">.</span>sh</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="四、测试连接" tabindex="-1"><a class="header-anchor" href="#四、测试连接"><span>四、测试连接</span></a></h2><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre><code><span class="line">cd <span class="token operator">/</span>opt/Kingbase/ES/V8/Server/bin</span>
<span class="line"><span class="token punctuation">.</span><span class="token operator">/</span>ksql <span class="token operator">-</span>U system <span class="token operator">-</span>d test</span>
<span class="line">\\l</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://i-blog.csdnimg.cn/blog_migrate/2f3fffceb830f8140d326be3d2e49e3d.png" alt="在这里插入图片描述"></p><h2 id="五、逻辑还原" tabindex="-1"><a class="header-anchor" href="#五、逻辑还原"><span>五、逻辑还原</span></a></h2><h3 id="_1-创建数据库" tabindex="-1"><a class="header-anchor" href="#_1-创建数据库"><span>1. 创建数据库</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">create</span> <span class="token keyword">database</span> zasirmp_0824<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="https://i-blog.csdnimg.cn/blog_migrate/d60294cd4a9274203a88509e167bca3a.png" alt="在这里插入图片描述"><strong>退出数据库</strong></p><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre><code><span class="line">\\q</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_2-dmp-文件还原数据库" tabindex="-1"><a class="header-anchor" href="#_2-dmp-文件还原数据库"><span>2. dmp 文件还原数据库</span></a></h2><p>可在 bin 目录下执行 sys_restore --help ，查看 sys_restore 用法</p><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre><code><span class="line">cd <span class="token operator">/</span>opt/Kingbase/ES/V8/Server/bin</span>
<span class="line"><span class="token punctuation">.</span><span class="token operator">/</span>sys_restore <span class="token operator">-</span>U system <span class="token operator">-</span>d zasirmp_0824 <span class="token operator">/</span>home/kingbase/DB_2022-08-25_16_08_33<span class="token punctuation">.</span>dmp</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>切换数据库，查看导入表表名</p><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre><code><span class="line"><span class="token punctuation">.</span><span class="token operator">/</span>ksql <span class="token operator">-</span>U system <span class="token operator">-</span>d zasirmp_0824</span>
<span class="line"><span class="token function">SELECT</span> table_name <span class="token keyword">FROM</span> information_schema<span class="token punctuation">.</span>tables WHERE table_schema = <span class="token string">&#39;public&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://i-blog.csdnimg.cn/blog_migrate/45407eb8166dceed2d965b4d6968e90a.png" alt="在这里插入图片描述"></p><h2 id="六、其他" tabindex="-1"><a class="header-anchor" href="#六、其他"><span>六、其他</span></a></h2><h3 id="_1-ora-input-emptystr-isnull" tabindex="-1"><a class="header-anchor" href="#_1-ora-input-emptystr-isnull"><span>1. ora_input_emptystr_isnull</span></a></h3><p>打开 /opt/Kingbase/ES/V8/data/kingbase.conf 文件</p><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre><code><span class="line">vi <span class="token operator">/</span>opt/Kingbase/ES/V8/<span class="token keyword">data</span><span class="token operator">/</span>kingbase<span class="token punctuation">.</span>conf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>拉到最最最下面，将参数</p><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre><code><span class="line">ora_input_emptystr_isnull = on</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>改为</p><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre><code><span class="line">ora_input_emptystr_isnull = off</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>改完之后保存，重启</p><h3 id="_2-查看服务状态" tabindex="-1"><a class="header-anchor" href="#_2-查看服务状态"><span>2. 查看服务状态</span></a></h3><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre><code><span class="line">systemctl status kingbase8d<span class="token punctuation">.</span>service</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-重启服务" tabindex="-1"><a class="header-anchor" href="#_3-重启服务"><span>3. 重启服务</span></a></h3><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre><code><span class="line">service kingbase8d restart</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,65)]))}const o=s(i,[["render",t],["__file","kingbase.html.vue"]]),d=JSON.parse('{"path":"/blogs/database/kingbase/kingbase.html","title":"Linux 服务器安装 KingbaseES V8R6","lang":"en-US","frontmatter":{"title":"Linux 服务器安装 KingbaseES V8R6","date":"2022-08-26T00:00:00.000Z","tags":["Kingbase"],"categories":["数据库"]},"headers":[{"level":2,"title":"一、安装包准备","slug":"一、安装包准备","link":"#一、安装包准备","children":[]},{"level":2,"title":"二、预安装工作","slug":"二、预安装工作","link":"#二、预安装工作","children":[{"level":3,"title":"1.创建安装用户","slug":"_1-创建安装用户","link":"#_1-创建安装用户","children":[]},{"level":3,"title":"2. 安装目录","slug":"_2-安装目录","link":"#_2-安装目录","children":[]},{"level":3,"title":"3. 准备安装程序","slug":"_3-准备安装程序","link":"#_3-准备安装程序","children":[]}]},{"level":2,"title":"三、安装","slug":"三、安装","link":"#三、安装","children":[{"level":3,"title":"1. 控制台安装","slug":"_1-控制台安装","link":"#_1-控制台安装","children":[]},{"level":3,"title":"2. 大小写敏感设置","slug":"_2-大小写敏感设置","link":"#_2-大小写敏感设置","children":[]},{"level":3,"title":"3. 执行 root.sh","slug":"_3-执行-root-sh","link":"#_3-执行-root-sh","children":[]}]},{"level":2,"title":"四、测试连接","slug":"四、测试连接","link":"#四、测试连接","children":[]},{"level":2,"title":"五、逻辑还原","slug":"五、逻辑还原","link":"#五、逻辑还原","children":[{"level":3,"title":"1. 创建数据库","slug":"_1-创建数据库","link":"#_1-创建数据库","children":[]}]},{"level":2,"title":"2.  dmp 文件还原数据库","slug":"_2-dmp-文件还原数据库","link":"#_2-dmp-文件还原数据库","children":[]},{"level":2,"title":"六、其他","slug":"六、其他","link":"#六、其他","children":[{"level":3,"title":"1. ora_input_emptystr_isnull","slug":"_1-ora-input-emptystr-isnull","link":"#_1-ora-input-emptystr-isnull","children":[]},{"level":3,"title":"2. 查看服务状态","slug":"_2-查看服务状态","link":"#_2-查看服务状态","children":[]},{"level":3,"title":"3. 重启服务","slug":"_3-重启服务","link":"#_3-重启服务","children":[]}]}],"git":{"createdTime":1736081154000,"updatedTime":1736081154000,"contributors":[{"name":"柒月廿三","email":"lxang723@163.com","commits":1}]},"filePathRelative":"blogs/database/kingbase/kingbase.md"}');export{o as comp,d as data};
